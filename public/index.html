<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>๐ฆ ุดุงุช ูุชูู ุงูุนูุฑุจ</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- ========== ุงูุชุญุณููุงุช ุงูุฌุฏูุฏุฉ ูู ุงูุชุตููู ========= -->
    <style>
        :root {
            --border-width: 1px;
            --padding-small: 6px;
            --padding-medium: 10px;
            --gap-small: 6px;
            --gap-medium: 10px;
            --message-max-height: 120px;
            --chat-area-height: calc(100vh - 280px);
        }

        /* ุชูููู ุงูุญุดู ูุงูุญุฏูุฏ */
        .login-container,
        .ban-container,
        .modal-content,
        .chat-area,
        .users-sidebar,
        .bottom-control-bar,
        .header-left,
        .header-right,
        .main-header,
        .message-input-container,
        .input-group,
        .auth-form,
        .sidebar-header,
        .messages-container,
        .profile-cover,
        .profile-info,
        .admin-tabs,
        .notification-form,
        .room-form {
            padding: var(--padding-small);
            border-radius: 8px;
            border: var(--border-width) solid rgba(0,0,0,0.1);
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
        }

        /* ุชูููู ุงููุณุงูุงุช ุจูู ุงูุนูุงุตุฑ */
        .main-content {
            display: flex;
            gap: var(--gap-small);
            height: calc(100vh - 70px);
        }

        .chat-area {
            flex: 3;
            display: flex;
            flex-direction: column;
            height: var(--chat-area-height);
            overflow: hidden;
        }

        .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: var(--padding-small);
            font-size: 14px;
            line-height: 1.4;
            scroll-behavior: smooth;
        }

        /* ุชูููู ุญุฌู ุงูุฑุณุงูุฉ ูุฒูุงุฏุฉ ุงููุซุงูุฉ */
        .message {
            margin: 4px 0;
            padding: 6px 10px;
            max-height: var(--message-max-height);
            overflow: hidden;
            word-wrap: break-word;
            border-radius: 12px;
            font-size: 13px;
            display: flex;
            flex-direction: column;
        }

        .message .username {
            font-weight: bold;
            font-size: 12px;
            margin-bottom: 2px;
        }

        .message .text {
            font-size: 13px;
            line-height: 1.3;
        }

        /* ุชูููู ุงูุญุดู ูู ุนูุงุตุฑ ุงููุงุฌูุฉ */
        .input-group input,
        .input-group select,
        .auth-btn,
        .tool-btn,
        .control-btn,
        .btn,
        .tab-btn,
        .user-name,
        .user-rank,
        .sidebar-header h3,
        .chat-header h2,
        .modal-header h2,
        .form-group label {
            font-size: 13px;
            padding: 6px 10px;
        }

        /* ุชูููู ุงููุณุงูุงุช ูู ุงูููุงุฆู */
        .menu-items .menu-item {
            padding: 8px 12px;
            gap: 8px;
        }

        .profile-avatars,
        .profile-stats,
        .stat-item {
            gap: 4px;
        }

        /* ุชุญุณูู ูุธูุฑ ูุณุงุญุฉ ุงูุดุงุช */
        .welcome-message {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            text-align: center;
            color: #666;
            font-size: 15px;
        }

        /* ุชูููู ุญุฌู ุดุฑูุท ุงูุฅุฏุฎุงู */
        .message-input-wrapper {
            display: flex;
            gap: 6px;
            align-items: center;
            padding: 6px 10px;
        }

        #messageInput {
            flex: 1;
            padding: 6px 10px;
            font-size: 13px;
            border: none;
            border-radius: 20px;
            outline: none;
            background-color: #f8f9fa;
        }

        /* ุชูููู ุญุฌู ุงูู badges */
        .notification-badge {
            font-size: 10px;
            padding: 2px 6px;
            min-width: 18px;
            height: 18px;
        }

        /* ุชุญุณูู ูุธูุฑ ุงูุฅุดุนุงุฑ ุนูุฏ ุงูููุถุงู */
        .flood-warning {
            background-color: #ff4d4d;
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 14px;
            margin: 10px 0;
            text-align: center;
            animation: fadeOut 3s ease-out;
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        /* ุชูููู ุญุฌู ุงูุฃุฒุฑุงุฑ ูุงูููุงุฆู ุงูุฌุงูุจูุฉ */
        .users-list .user-item {
            padding: 6px 10px;
            font-size: 13px;
            gap: 6px;
        }

        /* ุชุญุณูู ูุธูุฑ ููุญุฉ ุงูุฅุฏุงุฑุฉ */
        .admin-users-list .user-row,
        .ranks-list .rank-item,
        .banned-users-list .banned-user {
            font-size: 12px;
            padding: 5px 8px;
        }

        /* ุชุญุณูู ูุธูุฑ ุงูุฅุดุนุงุฑุงุช */
        .toast {
            font-size: 13px;
            padding: 8px 12px;
            border-radius: 10px;
            min-width: 180px;
        }

        /* ุชุญุณูู ูุธูุฑ ุงูุฎูููุงุช */
        .profile-cover img,
        .avatar-slot img {
            object-fit: cover;
        }

        /* ุชุญุณูู ูุธูุฑ ุงูุฑุณุงุฆู ุงูููุชุจุณุฉ */
        .quoted-message {
            margin: 6px 0;
            padding: 6px 10px;
            border-left: 3px solid #007bff;
            background-color: #f0f7ff;
            border-radius: 8px;
        }

        /* ุชูููู ุญุฌู ุดุฑูุท ุงูุชุญูู ุงูุณููู */
        .bottom-control-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 6px 12px;
            gap: 8px;
            background-color: #f1f1f1;
            border-top: var(--border-width) solid #ddd;
        }

        /* ุชูููู ุญุฌู ุฃุฒุฑุงุฑ ุงููุดุบู */
        .volume-control input[type="range"] {
            width: 60px;
        }

        /* ุชูููู ุญุฌู ุงููุตูุต ูู ุงูููุงุฆู */
        .now-playing,
        .song-title,
        .online-count {
            font-size: 12px;
        }

        /* ุชูููู ุญุฌู ุงูููุฏุงูุงุช */
        .main-menu,
        .news-modal,
        .stories-modal,
        .quiz-room-modal,
        .admin-modal,
        .settings-modal,
        .radio-player-modal,
        .create-room-modal,
        .ban-user-modal,
        .give-coins-modal,
        .send-notification-modal,
        .online-users-modal {
            max-height: 80vh;
            overflow-y: auto;
        }

        /* ุชูููู ุงูุญุดู ูู ุงูููุฏุงูุงุช */
        .modal-body,
        .modal-content {
            padding: 10px;
        }

        .form-group {
            margin-bottom: 8px;
        }

        /* ุชุญุณูู ูุธูุฑ ุงูุฒุฎุงุฑู */
        .feature-note {
            font-size: 12px;
            color: #888;
            margin: 5px 0;
        }

        /* ุชุญุณูู ูุธูุฑ ุงูุฑุณุงุฆู ุนูุฏ ุงููุชู */
        .muted-message {
            color: #999;
            font-style: italic;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <!-- ุดุงุดุฉ ุชุณุฌูู ุงูุฏุฎูู -->
    <div id="loginScreen" class="screen active">
        <div class="login-container">
            <div class="login-header">
                <div class="logo">
                    <h1>๐ฆ ุดุงุช ูุชูู ุงูุนูุฑุจ</h1>
                    <p>ููุตุฉ ุงูุชูุงุตู ุงูุงุฌุชูุงุนู ุงูุฃููู</p>
                </div>
            </div>
            <div class="login-tabs">
                <button class="tab-btn active" onclick="showLoginTab('login')">
                    <i class="fas fa-sign-in-alt"></i>
                    ุชุณุฌูู ุงูุฏุฎูู
                </button>
                <button class="tab-btn" onclick="showLoginTab('register')">
                    <i class="fas fa-user-plus"></i>
                    ุฅูุดุงุก ุญุณุงุจ
                </button>
                <button class="tab-btn" onclick="showLoginTab('guest')">
                    <i class="fas fa-user-secret"></i>
                    ุฏุฎูู ูุฒุงุฆุฑ
                </button>
            </div>
            <!-- ุชุณุฌูู ุงูุฏุฎูู -->
            <form id="loginForm" class="auth-form active">
                <div class="input-group">
                    <i class="fas fa-envelope"></i>
                    <input type="email" id="loginEmail" placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="loginPassword" placeholder="ูููุฉ ุงููุฑูุฑ" required>
                </div>
                <button type="submit" class="auth-btn">
                    <i class="fas fa-sign-in-alt"></i>
                    ุฏุฎูู
                </button>
            </form>
            <!-- ุฅูุดุงุก ุญุณุงุจ -->
            <form id="registerForm" class="auth-form">
                <div class="input-group">
                    <i class="fas fa-user"></i>
                    <input type="text" id="registerDisplayName" placeholder="ุงูุงุณู ุงููุนุฑูุถ" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-envelope"></i>
                    <input type="email" id="registerEmail" placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="registerPassword" placeholder="ูููุฉ ุงููุฑูุฑ" required>
                </div>
                <button type="submit" class="auth-btn">
                    <i class="fas fa-user-plus"></i>
                    ุฅูุดุงุก ุญุณุงุจ
                </button>
            </form>
            <!-- ุฏุฎูู ูุฒุงุฆุฑ -->
            <form id="guestForm" class="auth-form">
                <div class="input-group">
                    <i class="fas fa-user"></i>
                    <input type="text" id="guestName" placeholder="ุงูุงุณู ุงููุณุชุฎุฏู" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-birthday-cake"></i>
                    <input type="number" id="guestAge" placeholder="ุงูุนูุฑ" min="13" max="99" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-venus-mars"></i>
                    <select id="guestGender" required>
                        <option value="">ุงุฎุชุฑ ุงูุฌูุณ</option>
                        <option value="ุฐูุฑ">ุฐูุฑ</option>
                        <option value="ุฃูุซู">ุฃูุซู</option>
                        <option value="ุขุฎุฑ">ุขุฎุฑ</option>
                    </select>
                </div>
                <button type="submit" class="auth-btn">
                    <i class="fas fa-user-secret"></i>
                    ุฏุฎูู ูุฒุงุฆุฑ
                </button>
            </form>
            <div id="loginError" class="error-message"></div>
        </div>
    </div>

    <!-- ุดุงุดุฉ ุงูุญุธุฑ -->
    <div id="banScreen" class="screen">
        <div class="ban-container">
            <div class="ban-icon">๐ซ</div>
            <h2>ุชู ุญุธุฑู ูู ุงูุฏุฎูู</h2>
            <div id="banReason" class="ban-reason">
                <p>ูู ูุชู ุชุญุฏูุฏ ุณุจุจ ุงูุญุธุฑ</p>
            </div>
            <div class="contact-info">
                <p>ููุชูุงุตู ูุงูุงุณุชูุณุงุฑ:</p>
                <a href="mailto:njdj9985@gmail.com">njdj9985@gmail.com</a>
            </div>
            <button onclick="checkBanStatus()" class="btn btn-primary">
                <i class="fas fa-sync-alt"></i>
                ุงูุชุญูู ูู ุญุงูุฉ ุงูุญุธุฑ
            </button>
        </div>
    </div>

    <!-- ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ -->
    <div id="mainScreen" class="screen">
        <!-- ุงูุดุฑูุท ุงูุนููู -->
        <header class="main-header">
            <div class="header-left">
                <button class="hamburger-btn" onclick="openMainMenu()">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="app-logo">
                    <h1>๐ฆ ุดุงุช ูุชูู ุงูุนูุฑุจ</h1>
                </div>
            </div>
            <div class="header-center">
                <div class="room-selector">
                    <select id="roomSelect" onchange="changeRoom()">
                        <option value="1">ุงูุบุฑูุฉ ุงูุฑุฆูุณูุฉ</option>
                    </select>
                </div>
            </div>
            <div class="header-right">
                <button class="header-btn" onclick="openNotifications()" title="ุงูุฅุดุนุงุฑุงุช">
                    <i class="fas fa-bell"></i>
                    <span id="notificationCount" class="notification-badge">0</span>
                </button>
                <button class="header-btn" onclick="openSettings()" title="ุงูุฅุนุฏุงุฏุงุช">
                    <i class="fas fa-cog"></i>
                </button>
                <div class="user-profile-mini" onclick="openProfileModal()">
                    <img id="headerUserAvatar" class="user-avatar-mini" src="https://images.pexels.com/photos/771742/pexels-photo-771742.jpeg?auto=compress&cs=tinysrgb&w=100&h=100&fit=crop" alt="">
                    <div class="user-info-mini">
                        <span id="headerUserName" class="user-name">ุงููุณุชุฎุฏู</span>
                        <span id="headerUserRank" class="user-rank">ุฒุงุฆุฑ</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- ุงููุญุชูู ุงูุฑุฆูุณู -->
        <main class="main-content">
            <!-- ููุทูุฉ ุงูุฏุฑุฏุดุฉ -->
            <div class="chat-area">
                <div class="chat-header">
                    <h2 id="currentRoomName">ุงูุบุฑูุฉ ุงูุฑุฆูุณูุฉ</h2>
                    <div class="chat-controls">
                        <button class="control-btn" onclick="toggleChatMode()" title="ุชุจุฏูู ูุถุน ุงูุฏุฑุฏุดุฉ">
                            <i class="fas fa-exchange-alt"></i>
                            <span id="chatModeText">ุนุงู</span>
                        </button>
                        <button class="control-btn" onclick="clearChat()" title="ูุณุญ ุงูุฏุฑุฏุดุฉ" id="clearChatBtn" style="display: none;">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
                <div id="messagesContainer" class="messages-container">
                    <div class="welcome-message">
                        <div class="welcome-content">
                            <h3>๐ฆ ูุฑุญุจุงู ุจู ูู ุดุงุช ูุชูู ุงูุนูุฑุจ</h3>
                            <p>ุงุจุฏุฃ ูุญุงุฏุซุฉ ุฌุฏูุฏุฉ ุฃู ุงูุถู ูููุญุงุฏุซุงุช ุงูุฌุงุฑูุฉ</p>
                        </div>
                    </div>
                </div>
                <div class="message-input-container">
                    <div class="input-tools">
                        <button class="tool-btn" onclick="document.getElementById('imageInput').click()" title="ุฅุฑุณุงู ุตูุฑุฉ">
                            <i class="fas fa-image"></i>
                        </button>
                        <button class="tool-btn" onclick="toggleVoiceRecording()" title="ุชุณุฌูู ุตูุชู" id="voiceBtn">
                            <i class="fas fa-microphone"></i>
                        </button>
                        <button class="tool-btn" onclick="openEmojiPicker()" title="ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ">
                            <i class="fas fa-smile"></i>
                        </button>
                        <button class="tool-btn" onclick="openGifPicker()" title="ุตูุฑ ูุชุญุฑูุฉ">
                            <i class="fas fa-magic"></i>
                        </button>
                    </div>
                    <div class="message-input-wrapper">
                        <div class="quoted-message" id="quotedMessage" style="display: none;">
                            <div class="quoted-content">
                                <span class="quoted-author"></span>
                                <span class="quoted-text"></span>
                            </div>
                            <button class="cancel-quote" onclick="cancelQuote()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <input type="text" id="messageInput" placeholder="ุงูุชุจ ุฑุณุงูุชู ููุง..." maxlength="1000">
                        <button class="send-btn" onclick="sendMessage()">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                    <input type="file" id="imageInput" accept="image/*" style="display: none;">
                    <input type="file" id="voiceInput" accept="audio/*" style="display: none;">
                </div>
            </div>

            <!-- ุงูุดุฑูุท ุงูุฌุงูุจู ูููุณุชุฎุฏููู -->
            <aside class="users-sidebar">
                <div class="sidebar-header">
                    <h3>ุงููุชุตููู ุงูุขู</h3>
                    <span id="onlineCount" class="online-count">0</span>
                </div>
                <div id="onlineUsersList" class="users-list">
                    <!-- ุณูุชู ููุคูุง ุจุงูุฌุงูุงุณูุฑูุจุช -->
                </div>
            </aside>
        </main>

        <!-- ุดุฑูุท ุงูุชุญูู ุงูุณููู -->
        <div class="bottom-control-bar">
            <button class="control-btn" onclick="reloadPage()" title="ุชุญุฏูุซ ุงูุตูุญุฉ">
                <i class="fas fa-sync-alt"></i>
            </button>
            <button class="control-btn" onclick="openRadioPlayer()" title="ุงูุฑุงุฏูู">
                <i class="fas fa-radio"></i>
            </button>
            <div class="music-controls">
                <button class="control-btn" onclick="toggleMusicPlayer()" title="ูุดุบู ุงูููุณููู" id="musicToggle">
                    <i class="fas fa-music"></i>
                </button>
                <div class="volume-control">
                    <i class="fas fa-volume-up"></i>
                    <input type="range" id="volumeSlider" min="0" max="100" value="50">
                </div>
            </div>
            <div class="now-playing" id="nowPlaying" style="display: none;">
                <span class="song-title">ูุง ููุฌุฏ ุชุดุบูู</span>
            </div>
        </div>
    </div>

    <!-- ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ -->
    <div id="mainMenuModal" class="modal">
        <div class="modal-content main-menu">
            <div class="modal-header">
                <h2>ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</h2>
                <button class="close-btn" onclick="closeMainMenu()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="menu-items">
                <div class="menu-item" onclick="openNewsSection()">
                    <i class="fas fa-newspaper"></i>
                    <span>ุงูุฃุฎุจุงุฑ</span>
                    <p>ุงูุดุฑ ุงูุฃุฎุจุงุฑ ูุงูุชุญุฏูุซุงุช</p>
                </div>
                <div class="menu-item" onclick="openStoriesSection()">
                    <i class="fas fa-images"></i>
                    <span>ุงููุตุต ุงูููููุฉ</span>
                    <p>ุดุงุฑู ูุตุชู ุงูููููุฉ</p>
                </div>
                <div class="menu-item" onclick="openSendNotificationModal()">
                    <i class="fas fa-bell"></i>
                    <span>ุฅุฑุณุงู ุฅุดุนุงุฑ</span>
                    <p>ุฅุฑุณุงู ุฅุดุนุงุฑ ูุฃู ุดุฎุต</p>
                </div>
                <div class="menu-item" onclick="openOnlineUsersModal()">
                    <i class="fas fa-users"></i>
                    <span>ุงููุชุตููู ุญุงููุงู</span>
                    <p>ุนุฑุถ ูุงุฆูุฉ ุงููุชุตููู</p>
                </div>
                <div class="menu-item" onclick="openPrivateChatBox()">
                    <i class="fas fa-comment-dots"></i>
                    <span>ุตูุฏูู ุงูุฏุฑุฏุดุฉ</span>
                    <p>ุฏุฑุฏุดุฉ ุฎุงุตุฉ ูููุตูุฉ</p>
                </div>
                <div class="menu-item" onclick="openGamesSection()">
                    <i class="fas fa-gamepad"></i>
                    <span>ุงูุฃูุนุงุจ</span>
                    <p>ุงูุนุจ ูุน ุงูุฃุตุฏูุงุก</p>
                </div>
                <div class="menu-item" onclick="openQuizRoom()">
                    <i class="fas fa-question-circle"></i>
                    <span>ุบุฑูุฉ ุงููุณุงุจูุงุช</span>
                    <p>ุงุฎุชุจุฑ ูุนูููุงุชู ูุงุฑุจุญ ุงูููุงุท</p>
                </div>
                <div class="menu-item" onclick="openRoomsManager()" id="roomsManagerBtn" style="display: none;">
                    <i class="fas fa-door-open"></i>
                    <span>ุฅุฏุงุฑุฉ ุงูุบุฑู</span>
                    <p>ุฅูุดุงุก ูุฅุฏุงุฑุฉ ุงูุบุฑู</p>
                </div>
                <div class="menu-item" onclick="openCoinsShop()">
                    <i class="fas fa-coins"></i>
                    <span>ูุชุฌุฑ ุงูููุงุท</span>
                    <p>ุงุดุชุฑู ุงููููุฒุงุช ุจุงูููุงุท</p>
                </div>
                <div class="menu-item" onclick="openAdminPanel()" id="adminPanelBtn" style="display: none;">
                    <i class="fas fa-crown"></i>
                    <span>ููุญุฉ ุงูุฅุฏุงุฑุฉ</span>
                    <p>ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุงููุธุงู</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุงูููู ุงูุดุฎุตู -->
    <div id="profileModal" class="modal">
        <div class="modal-content profile-modal">
            <div class="modal-header">
                <h2>ุงูููู ุงูุดุฎุตู</h2>
                <button class="close-btn" onclick="closeProfileModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="profile-content">
                <div class="profile-cover">
                    <img id="profileCover" src="https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800&h=300&fit=crop" alt="ุฎูููุฉ ุงูุจุฑููุงูู">
                    <input type="file" id="coverInput" accept="image/*" style="display: none;">
                    <button class="change-cover-btn" onclick="document.getElementById('coverInput').click()">
                        <i class="fas fa-camera"></i>
                        ุชุบููุฑ ุงูุฎูููุฉ
                    </button>
                </div>
                <div class="profile-info">
                    <div class="profile-avatar-section">
                        <div class="profile-avatars">
                            <div class="avatar-slot">
                                <img id="profileImg1" src="https://images.pexels.com/photos/771742/pexels-photo-771742.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop" alt="ุตูุฑุฉ 1">
                                <input type="file" id="profileFile1" accept="image/*" style="display: none;">
                                <button onclick="document.getElementById('profileFile1').click()">
                                    <i class="fas fa-camera"></i>
                                </button>
                            </div>
                            <div class="avatar-slot">
                                <img id="profileImg2" src="https://images.pexels.com/photos/1040880/pexels-photo-1040880.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop" alt="ุตูุฑุฉ 2">
                                <input type="file" id="profileFile2" accept="image/*" style="display: none;">
                                <button onclick="document.getElementById('profileFile2').click()">
                                    <i class="fas fa-camera"></i>
                                </button>
                            </div>
                        </div>
                        <div class="profile-stats">
                            <div class="stat-item">
                                <span class="stat-number" id="profileLikes">0</span>
                                <span class="stat-label">ุฅุนุฌุงุจ</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="profileCoins">2000</span>
                                <span class="stat-label">ููุทุฉ</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="profileRank">ุฒุงุฆุฑ</span>
                                <span class="stat-label">ุงูุฑุชุจุฉ</span>
                            </div>
                        </div>
                    </div>
                    <div class="profile-details">
                        <div class="profile-tabs">
                            <button class="tab-btn active" onclick="showProfileTab('info')">
                                <i class="fas fa-info-circle"></i>
                                ุงููุนูููุงุช
                            </button>
                            <button class="tab-btn" onclick="showProfileTab('settings')">
                                <i class="fas fa-cog"></i>
                                ุงูุฅุนุฏุงุฏุงุช
                            </button>
                            <button class="tab-btn" onclick="showProfileTab('music')">
                                <i class="fas fa-music"></i>
                                ุงูููุณููู
                            </button>
                            <button class="tab-btn" onclick="showProfileTab('decorations')">
                                <i class="fas fa-palette"></i>
                                ุงูุฒุฎุงุฑู
                            </button>
                        </div>
                        <!-- ุชุจููุจ ุงููุนูููุงุช -->
                        <div id="profileInfoTab" class="profile-tab active">
                            <div class="info-section">
                                <label>ุงูุงุณู ุงููุนุฑูุถ:</label>
                                <input type="text" id="displayNameInput" placeholder="ุงุณูู ุงููุนุฑูุถ">
                            </div>
                            <div class="info-section">
                                <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:</label>
                                <input type="email" id="emailInput" placeholder="ุจุฑูุฏู ุงูุฅููุชุฑููู">
                            </div>
                            <div class="info-section">
                                <label>ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ:</label>
                                <input type="password" id="newPasswordInput" placeholder="ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ">
                            </div>
                            <div class="info-section">
                                <label>ุงูุนูุฑ:</label>
                                <input type="number" id="ageInput" min="13" max="100">
                            </div>
                            <div class="info-section">
                                <label>ุงูุฌูุณ:</label>
                                <select id="genderInput">
                                    <option value="">ุบูุฑ ูุญุฏุฏ</option>
                                    <option value="ุฐูุฑ">ุฐูุฑ</option>
                                    <option value="ุฃูุซู">ุฃูุซู</option>
                                </select>
                            </div>
                            <div class="info-section">
                                <label>ุงูุญุงูุฉ ุงูุงุฌุชูุงุนูุฉ:</label>
                                <select id="maritalStatusInput">
                                    <option value="">ุบูุฑ ูุญุฏุฏ</option>
                                    <option value="ุฃุนุฒุจ">ุฃุนุฒุจ</option>
                                    <option value="ูุฑุชุจุท">ูุฑุชุจุท</option>
                                    <option value="ูุชุฒูุฌ">ูุชุฒูุฌ</option>
                                </select>
                            </div>
                            <div class="info-section">
                                <label>ูุจุฐุฉ ุนูู:</label>
                                <textarea id="aboutMeInput" placeholder="ุงูุชุจ ุดูุฆุงู ุนู ููุณู..."></textarea>
                            </div>
                            <button onclick="updateProfile()" class="btn save-btn">
                                <i class="fas fa-save"></i>
                                ุญูุธ ุงูุชุบููุฑุงุช
                            </button>
                        </div>
                        <!-- ุชุจููุจ ุงูุฅุนุฏุงุฏุงุช -->
                        <div id="profileSettingsTab" class="profile-tab">
                            <div class="settings-section">
                                <h4>ููู ุงูุงุณู</h4>
                                <input type="color" id="nameColorPicker" value="#ffffff">
                                <button onclick="updateNameColor()" class="btn">ุชุทุจูู ุงูููู</button>
                            </div>
                            <div class="settings-section">
                                <h4>ููู ุงูุฎุท</h4>
                                <input type="color" id="fontColorPicker" value="#000000">
                                <button onclick="updateFontColor()" class="btn">ุชุทุจูู ุงูููู</button>
                            </div>
                            <div class="settings-section">
                                <h4>ุฎูููุฉ ุงูุฑุณุงุฆู</h4>
                                <input type="file" id="messageBackgroundInput" accept="image/*">
                                <button onclick="uploadMessageBackground()" class="btn">ุชุญุฏูุซ ุงูุฎูููุฉ</button>
                            </div>
                        </div>
                        <!-- ุชุจููุจ ุงูููุณููู -->
                        <div id="profileMusicTab" class="profile-tab">
                            <div class="music-section">
                                <h4>ููุณููู ุงูุจุฑููุงูู</h4>
                                <input type="file" id="profileMusicInput" accept="audio/*">
                                <div id="currentMusic" class="current-music">
                                    <audio id="profileAudio" controls style="display: none;"></audio>
                                </div>
                                <button onclick="uploadProfileMusic()" class="btn">ุฑูุน ููุณููู</button>
                                <button onclick="removeProfileMusic()" class="btn btn-danger">ุฅุฒุงูุฉ ุงูููุณููู</button>
                                <p class="feature-note">ูุชุงุญ ููุฑุชุจ ุงูุนุงููุฉ ููุท</p>
                            </div>
                        </div>
                        <!-- ุชุจููุจ ุงูุฒุฎุงุฑู -->
                        <div id="profileDecorationsTab" class="profile-tab">
                            <div class="decorations-section">
                                <h4>ุฒุฎุฑูุฉ ุงูุงุณู</h4>
                                <select id="nameDecorationSelect">
                                    <option value="">ุจุฏูู ุฒุฎุฑูุฉ</option>
                                    <option value="fire">ูุงุฑ ๐ฅ</option>
                                    <option value="star">ูุฌูู โญ</option>
                                    <option value="crown">ุชุงุฌ ๐</option>
                                    <option value="diamond">ูุงุณ ๐</option>
                                    <option value="rainbow">ููุณ ูุฒุญ ๐</option>
                                </select>
                                <button onclick="updateNameDecoration()" class="btn">ุชุทุจูู ุงูุฒุฎุฑูุฉ</button>
                                <p class="feature-note">ุจุนุถ ุงูุฒุฎุงุฑู ูุชุงุญุฉ ููุฑุชุจ ุงูุนุงููุฉ ููุท</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุนุฑุถ ููู ุดุฎุตู ุขุฎุฑ -->
    <div id="viewProfileModal" class="modal">
        <div class="modal-content profile-modal">
            <div class="modal-header">
                <h2 id="viewProfileName">ุงูููู ุงูุดุฎุตู</h2>
                <button class="close-btn" onclick="closeViewProfileModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="profile-content">
                <div class="profile-cover">
                    <img id="viewProfileCover" src="" alt="ุฎูููุฉ ุงูุจุฑููุงูู">
                </div>
                <div class="profile-info">
                    <div class="profile-avatar-section">
                        <div class="profile-avatars">
                            <div class="avatar-slot">
                                <img id="viewProfileImg1" src="" alt="ุตูุฑุฉ 1">
                            </div>
                            <div class="avatar-slot">
                                <img id="viewProfileImg2" src="" alt="ุตูุฑุฉ 2">
                            </div>
                        </div>
                        <div class="profile-stats">
                            <div class="stat-item">
                                <span class="stat-number" id="viewProfileLikes">0</span>
                                <span class="stat-label">ุฅุนุฌุงุจ</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="viewProfileCoins">0</span>
                                <span class="stat-label">ููุทุฉ</span>
                            </div>
                        </div>
                        <div class="profile-actions">
                            <button onclick="likeProfile()" class="btn like-btn">
                                <i class="fas fa-heart"></i> ุฅุนุฌุงุจ
                            </button>
                            <button onclick="startPrivateChat()" class="btn message-btn">
                                <i class="fas fa-envelope"></i> ุฑุณุงูุฉ
                            </button>
                        </div>
                    </div>
                    <div class="profile-details">
                        <div id="viewProfileInfo" class="profile-info-display">
                            <!-- ุณูุชู ููุคูุง ุจุงูุฌุงูุงุณูุฑูุจุช -->
                        </div>
                        <div id="viewProfileMusic" class="profile-music-display">
                            <!-- ููุณููู ุงูุจุฑููุงูู -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุงูุฃุฎุจุงุฑ -->
    <div id="newsModal" class="modal">
        <div class="modal-content news-modal">
            <div class="modal-header">
                <h2>๐ฐ ููุงุฉ ุงูุฃุฎุจุงุฑ</h2>
                <button class="close-btn" onclick="closeNewsModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="news-content">
                <div class="news-post-form">
                    <textarea id="newsContentInput" placeholder="ุงูุชุจ ุฎุจุฑูุง..." maxlength="500"></textarea>
                    <div class="news-form-actions">
                        <input type="file" id="newsFileInput" accept="image/*,video/*" style="display: none;">
                        <button onclick="document.getElementById('newsFileInput').click()" class="btn btn-secondary">
                            <i class="fas fa-image"></i>
                            ุงุฎุชุฑ ุตูุฑุฉ ุฃู ููุฏูู
                        </button>
                        <button onclick="postNews()" class="btn btn-primary">
                            <i class="fas fa-paper-plane"></i>
                            ูุดุฑ
                        </button>
                    </div>
                </div>
                <div id="newsFeed" class="news-feed">
                    <!-- ุณูุชู ููุคูุง ุจุงูุฌุงูุงุณูุฑูุจุช -->
                </div>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุงููุตุต -->
    <div id="storiesModal" class="modal">
        <div class="modal-content stories-modal">
            <div class="modal-header">
                <h2>๐ธ ุงููุตุต ุงูููููุฉ</h2>
                <button class="close-btn" onclick="closeStoriesModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="stories-content">
                <div class="add-story-section">
                    <button onclick="openAddStoryModal()" class="btn add-story-btn">
                        <i class="fas fa-plus"></i> ุฅุถุงูุฉ ูุตุฉ
                    </button>
                </div>
                <div id="storiesContainer" class="stories-container">
                    <!-- ุณูุชู ููุคูุง ุจุงูุฌุงูุงุณูุฑูุจุช -->
                </div>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุฅุถุงูุฉ ูุตุฉ -->
    <div id="addStoryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ุฅุถุงูุฉ ูุตุฉ ุฌุฏูุฏุฉ</h2>
                <button class="close-btn" onclick="closeAddStoryModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="story-form">
                <input type="file" id="storyMediaInput" accept="image/*,video/*" required>
                <textarea id="storyTextInput" placeholder="ูุต ุงููุตุฉ (ุงุฎุชูุงุฑู)"></textarea>
                <button onclick="addStory()" class="btn btn-primary">
                    <i class="fas fa-plus"></i>
                    ุฅุถุงูุฉ ุงููุตุฉ
                </button>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุบุฑูุฉ ุงููุณุงุจูุงุช -->
    <div id="quizRoomModal" class="modal">
        <div class="modal-content quiz-room-modal">
            <div class="modal-header">
                <h2>๐ ุบุฑูุฉ ุงููุณุงุจูุงุช</h2>
                <button class="close-btn" onclick="closeQuizRoom()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="quiz-content">
                <div class="quiz-stats">
                    <div class="stat-item">
                        <span>ููุงุทู:</span>
                        <span id="userQuizPoints">0</span>
                    </div>
                    <div class="stat-item">
                        <span>ุงูุชุฑุชูุจ:</span>
                        <span id="userQuizRank">#-</span>
                    </div>
                </div>
                <div id="quizQuestion" class="quiz-question">
                    <h3 id="questionText">ูุฑุญุจุงู ุจู ูู ุบุฑูุฉ ุงููุณุงุจูุงุช!</h3>
                    <div id="questionOptions" class="question-options"></div>
                    <div class="quiz-timer">
                        <span>ุงูููุช ุงููุชุจูู: </span>
                        <span id="quizTimer">30</span>
                        <span> ุซุงููุฉ</span>
                    </div>
                </div>
                <div id="quizLeaderboard" class="quiz-leaderboard">
                    <h4>ููุญุฉ ุงููุชุตุฏุฑูู</h4>
                    <div id="leaderboardList"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ููุญุฉ ุงูุฅุฏุงุฑุฉ -->
    <div id="adminModal" class="modal">
        <div class="modal-content admin-modal">
            <div class="modal-header">
                <h2>๐ ููุญุฉ ุงูุฅุฏุงุฑุฉ</h2>
                <button class="close-btn" onclick="closeAdminModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="admin-content">
                <div class="admin-tabs">
                    <button class="tab-btn active" onclick="showAdminTab('users')">
                        <i class="fas fa-users"></i>
                        ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
                    </button>
                    <button class="tab-btn" onclick="showAdminTab('ranks')">
                        <i class="fas fa-crown"></i>
                        ุงูุฑุชุจ
                    </button>
                    <button class="tab-btn" onclick="showAdminTab('rooms')">
                        <i class="fas fa-door-open"></i>
                        ุงูุบุฑู
                    </button>
                    <button class="tab-btn" onclick="showAdminTab('bans')">
                        <i class="fas fa-ban"></i>
                        ุงูุญุธุฑ ูุงููุชู
                    </button>
                    <button class="tab-btn" onclick="showAdminTab('coins')">
                        <i class="fas fa-coins"></i>
                        ุงูููุงุท
                    </button>
                    <button class="tab-btn" onclick="showAdminTab('notifications')">
                        <i class="fas fa-bell"></i>
                        ุงูุฅุดุนุงุฑุงุช
                    </button>
                </div>
                <div id="adminUsersTab" class="admin-tab active">
                    <div class="admin-actions">
                        <button onclick="refreshUsersList()" class="btn">
                            <i class="fas fa-sync-alt"></i>
                            ุชุญุฏูุซ ุงููุงุฆูุฉ
                        </button>
                    </div>
                    <div id="adminUsersList" class="admin-users-list">
                        <!-- ุณูุชู ููุคูุง ุจุงูุฌุงูุงุณูุฑูุจุช -->
                    </div>
                </div>
                <div id="adminRanksTab" class="admin-tab">
                    <div class="ranks-management">
                        <h3>ุงูุฑุชุจ ุงููุชุงุญุฉ</h3>
                        <div id="ranksList" class="ranks-list">
                            <!-- ุณูุชู ููุคูุง ุจุงูุฌุงูุงุณูุฑูุจุช -->
                        </div>
                    </div>
                </div>
                <div id="adminRoomsTab" class="admin-tab">
                    <div class="rooms-management">
                        <button onclick="openCreateRoomModal()" class="btn btn-primary">
                            <i class="fas fa-plus"></i>
                            ุฅูุดุงุก ุบุฑูุฉ ุฌุฏูุฏุฉ
                        </button>
                        <div id="adminRoomsList" class="admin-rooms-list">
                            <!-- ุณูุชู ููุคูุง ุจุงูุฌุงูุงุณูุฑูุจุช -->
                        </div>
                    </div>
                </div>
                <div id="adminBansTab" class="admin-tab">
                    <div class="bans-management">
                        <h3>ุงููุณุชุฎุฏููู ุงููุญุธูุฑูู</h3>
                        <div id="bannedUsersList" class="banned-users-list">
                            <!-- ุณูุชู ููุคูุง ุจุงูุฌุงูุงุณูุฑูุจุช -->
                        </div>
                    </div>
                </div>
                <div id="adminCoinsTab" class="admin-tab">
                    <div class="coins-management">
                        <h3>ุฅุฏุงุฑุฉ ุงูููุงุท</h3>
                        <div class="coins-form">
                            <select id="coinsUserSelect">
                                <option value="">ุงุฎุชุฑ ุงููุณุชุฎุฏู</option>
                            </select>
                            <input type="number" id="coinsAmount" placeholder="ุนุฏุฏ ุงูููุงุท">
                            <button onclick="giveCoins()" class="btn btn-primary">
                                <i class="fas fa-coins"></i>
                                ุฅุนุทุงุก ููุงุท
                            </button>
                        </div>
                    </div>
                </div>
                <div id="adminNotificationsTab" class="admin-tab">
                    <div class="notifications-management">
                        <h3>ุฅุฑุณุงู ุฅุดุนุงุฑุงุช</h3>
                        <div class="notification-form">
                            <select id="notificationTarget">
                                <option value="all">ููุฌููุน</option>
                                <option value="specific">ููุณุชุฎุฏู ูุญุฏุฏ</option>
                            </select>
                            <select id="specificUserSelect" style="display: none;">
                                <option value="">ุงุฎุชุฑ ุงููุณุชุฎุฏู</option>
                            </select>
                            <textarea id="notificationMessage" placeholder="ูุต ุงูุฅุดุนุงุฑ"></textarea>
                            <button onclick="sendNotification()" class="btn btn-primary">
                                <i class="fas fa-paper-plane"></i>
                                ุฅุฑุณุงู ุงูุฅุดุนุงุฑ
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุฅุฌุฑุงุกุงุช ุงููุณุชุฎุฏู -->
    <div id="userActionsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ุฅุฌุฑุงุกุงุช ุงููุณุชุฎุฏู</h2>
                <button class="close-btn" onclick="closeUserActionsModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="user-actions">
                <div class="user-info">
                    <img id="actionUserAvatar" src="" alt="">
                    <span id="actionUserName"></span>
                </div>
                <div class="actions-grid">
                    <button onclick="viewUserProfile()" class="action-btn">
                        <i class="fas fa-user"></i>
                        <span>ุนุฑุถ ุงูููู ุงูุดุฎุตู</span>
                    </button>
                    <button onclick="startPrivateChat()" class="action-btn">
                        <i class="fas fa-envelope"></i>
                        <span>ุฑุณุงูุฉ ุฎุงุตุฉ</span>
                    </button>
                    <button onclick="openBanUserModal()" class="action-btn ban-btn admin-only">
                        <i class="fas fa-ban"></i>
                        <span>ุญุธุฑ</span>
                    </button>
                    <button onclick="openMuteUserModal()" class="action-btn mute-btn admin-only">
                        <i class="fas fa-volume-mute"></i>
                        <span>ูุชู</span>
                    </button>
                    <button onclick="openAssignRankModal()" class="action-btn rank-btn admin-only">
                        <i class="fas fa-crown"></i>
                        <span>ุชุนููู ุฑุชุจุฉ</span>
                    </button>
                    <button onclick="openGiveCoinsModal()" class="action-btn coins-btn admin-only">
                        <i class="fas fa-coins"></i>
                        <span>ุฅุนุทุงุก ููุงุท</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุญุธุฑ ุงููุณุชุฎุฏู -->
    <div id="banUserModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏู</h2>
                <button class="close-btn" onclick="closeBanUserModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="ban-form">
                <div class="form-group">
                    <label>ุณุจุจ ุงูุฅุฌุฑุงุก:</label>
                    <textarea id="banReason" placeholder="ุงูุชุจ ุณุจุจ ุงูุญุธุฑ ุฃู ุงููุชู..." required></textarea>
                </div>
                <div class="form-actions">
                    <button onclick="confirmBanUser()" class="btn ban-btn">
                        <i class="fas fa-ban"></i>
                        ุชุฃููุฏ ุงูุญุธุฑ ุงูุฏุงุฆู
                    </button>
                    <button onclick="unbanUser()" class="btn unban-btn">
                        <i class="fas fa-unlock"></i>
                        ูู ุงูุญุธุฑ
                    </button>
                    <button onclick="muteUser()" class="btn mute-btn">
                        <i class="fas fa-microphone-slash"></i>
                        ูุชู ุงููุณุชุฎุฏู
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุชุนููู ุงูุฑุชุจุฉ -->
    <div id="assignRankModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ุชุนููู ุฑุชุจุฉ</h2>
                <button class="close-btn" onclick="closeAssignRankModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="rank-form">
                <div class="form-group">
                    <label>ุงููุณุชุฎุฏู:</label>
                    <span id="rankTargetUser"></span>
                </div>
                <div class="form-group">
                    <label>ุงูุฑุชุจุฉ ุงูุฌุฏูุฏุฉ:</label>
                    <select id="newRankSelect">
                        <option value="visitor">ุฒุงุฆุฑ</option>
                        <option value="bronze">ุนุถู ุจุฑููุฒู</option>
                        <option value="silver">ุนุถู ูุถู</option>
                        <option value="gold">ุนุถู ุฐูุจู</option>
                        <option value="trophy">ูุฃุณ</option>
                        <option value="diamond">ุนุถู ุงููุงุณ</option>
                        <option value="prince">ุจุฑูุณ</option>
                        <option value="admin">ุฅุฏุงุฑู</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ุณุจุจ ุงูุชุบููุฑ:</label>
                    <textarea id="rankChangeReason" placeholder="ุณุจุจ ุชุบููุฑ ุงูุฑุชุจุฉ (ุงุฎุชูุงุฑู)"></textarea>
                </div>
                <button onclick="confirmAssignRank()" class="btn btn-primary">
                    <i class="fas fa-crown"></i>
                    ุชุนููู ุงูุฑุชุจุฉ
                </button>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุงูุฅุดุนุงุฑุงุช -->
    <div id="notificationsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ุงูุฅุดุนุงุฑุงุช</h2>
                <button class="close-btn" onclick="closeNotificationsModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="notificationsList" class="notifications-list">
                <!-- ุณูุชู ููุคูุง ุจุงูุฌุงูุงุณูุฑูุจุช -->
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุงูุฅุนุฏุงุฏุงุช -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ุงูุฅุนุฏุงุฏุงุช</h2>
                <button class="close-btn" onclick="closeSettingsModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="settings-content">
                <div class="settings-section">
                    <h3>ุฅุนุฏุงุฏุงุช ุงูุตูุช</h3>
                    <div class="setting-item">
                        <label>ุฃุตูุงุช ุงูุฅุดุนุงุฑุงุช</label>
                        <label class="switch">
                            <input type="checkbox" id="soundNotifications" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>ุฅุนุฏุงุฏุงุช ุงูุฏุฑุฏุดุฉ</h3>
                    <div class="setting-item">
                        <label>ุญูุธ ุชุงุฑูุฎ ุงูุฏุฑุฏุดุฉ</label>
                        <label class="switch">
                            <input type="checkbox" id="saveChatHistory" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>ุฅุฌุฑุงุกุงุช</h3>
                    <button onclick="exitChat()" class="btn btn-warning">
                        <i class="fas fa-sign-out-alt"></i>
                        ุงูุฎุฑูุฌ ูู ุงูุฏุฑุฏุดุฉ
                    </button>
                    <button onclick="exitRoom()" class="btn btn-secondary">
                        <i class="fas fa-door-open"></i>
                        ุงูุฎุฑูุฌ ูู ุงูุบุฑูุฉ
                    </button>
                    <button onclick="openHelpModal()" class="btn btn-info">
                        <i class="fas fa-question-circle"></i>
                        ุงููุณุงุนุฏุฉ
                    </button>
                    <button onclick="showRanks()" class="btn btn-primary">
                        <i class="fas fa-crown"></i>
                        ุนุฑุถ ุงูุฑุชุจ
                    </button>
                    <button onclick="cleanRooms()" class="btn btn-danger admin-only">
                        <i class="fas fa-broom"></i>
                        ุชูุธูู ุงูุบุฑู
                    </button>
                </div>
                <button onclick="saveSettings()" class="btn save-btn">
                    <i class="fas fa-save"></i>
                    ุญูุธ ุงูุฅุนุฏุงุฏุงุช
                </button>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ูุดุบู ุงูุฑุงุฏูู -->
    <div id="radioPlayerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>๐ป ูุดุบู ุงูุฑุงุฏูู</h2>
                <button class="close-btn" onclick="closeRadioPlayer()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="radio-content">
                <div class="radio-stations">
                    <div class="station" onclick="playRadioStation('arabic')">
                        <i class="fas fa-music"></i>
                        <span>ูุญุทุฉ ุงูุฃุบุงูู ุงูุนุฑุจูุฉ</span>
                    </div>
                    <div class="station" onclick="playRadioStation('english')">
                        <i class="fas fa-music"></i>
                        <span>ูุญุทุฉ ุงูุฃุบุงูู ุงูุฃุฌูุจูุฉ</span>
                    </div>
                    <div class="station" onclick="playRadioStation('classical')">
                        <i class="fas fa-music"></i>
                        <span>ูุญุทุฉ ุงูููุณููู ุงูููุงุณูููุฉ</span>
                    </div>
                </div>
                <div class="radio-controls">
                    <button id="radioPlayBtn" onclick="toggleRadio()">
                        <i class="fas fa-play"></i>
                    </button>
                    <input type="range" id="radioVolume" min="0" max="100" value="50">
                </div>
                <div class="custom-music">
                    <h4>ุฃุบุงููู ุงูุฎุงุตุฉ</h4>
                    <input type="file" id="customMusicInput" accept="audio/*" multiple>
                    <button onclick="uploadCustomMusic()" class="btn">
                        <i class="fas fa-upload"></i>
                        ุฑูุน ุฃุบุงูู
                    </button>
                    <div id="customMusicList" class="custom-music-list">
                        <!-- ุณูุชู ููุคูุง ุจุงูุฌุงูุงุณูุฑูุจุช -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุฅูุดุงุก ุบุฑูุฉ -->
    <div id="createRoomModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ุฅูุดุงุก ุบุฑูุฉ ุฌุฏูุฏุฉ</h2>
                <button class="close-btn" onclick="closeCreateRoomModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="room-form">
                <div class="form-group">
                    <label>ุงุณู ุงูุบุฑูุฉ:</label>
                    <input type="text" id="roomName" placeholder="ุงุณู ุงูุบุฑูุฉ" required>
                </div>
                <div class="form-group">
                    <label>ูุตู ุงูุบุฑูุฉ:</label>
                    <textarea id="roomDescription" placeholder="ูุตู ุงูุบุฑูุฉ (ุงุฎุชูุงุฑู)"></textarea>
                </div>
                <div class="form-group">
                    <label>ุฎูููุฉ ุงูุบุฑูุฉ:</label>
                    <input type="file" id="roomBackgroundInput" accept="image/*">
                </div>
                <button onclick="createRoom()" class="btn btn-primary">
                    <i class="fas fa-plus"></i>
                    ุฅูุดุงุก ุงูุบุฑูุฉ
                </button>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุญุธุฑ ุงููุณุชุฎุฏู (ูุณุฎุฉ ููุฑุฑุฉ) -->
    <div id="banUserModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ุญุธุฑ ุงููุณุชุฎุฏู</h2>
                <button class="close-btn" onclick="closeModal('banUserModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="ban-form">
                <div class="form-group">
                    <label>ุงููุณุชุฎุฏู ุงููุญุฏุฏ:</label>
                    <span id="banTargetUser" data-user-id=""></span>
                </div>
                <div class="form-group">
                    <label>ุณุจุจ ุงูุญุธุฑ:</label>
                    <textarea id="banReason" placeholder="ุงูุชุจ ุณุจุจ ุงูุญุธุฑ..." required></textarea>
                </div>
                <div class="form-group">
                    <label>ูุฏุฉ ุงูุญุธุฑ:</label>
                    <select id="banDuration">
                        <option value="1">ุณุงุนุฉ ูุงุญุฏุฉ</option>
                        <option value="24">24 ุณุงุนุฉ</option>
                        <option value="168">ุฃุณุจูุน ูุงุญุฏ</option>
                        <option value="720">ุดูุฑ ูุงุญุฏ</option>
                        <option value="permanent">ุฏุงุฆู</option>
                    </select>
                </div>
                <button onclick="banUser()" class="btn btn-danger">
                    <i class="fas fa-ban"></i>
                    ุญุธุฑ ุงููุณุชุฎุฏู
                </button>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุฅูุฏุงุก ุงูููุงุท -->
    <div id="giveCoinsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ุฅูุฏุงุก ููุงุท</h2>
                <button class="close-btn" onclick="closeModal('giveCoinsModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="coins-form">
                <div class="form-group">
                    <label>ุงููุณุชุฎุฏู ุงููุญุฏุฏ:</label>
                    <span id="coinsTargetUser" data-user-id=""></span>
                </div>
                <div class="form-group">
                    <label>ุนุฏุฏ ุงูููุงุท:</label>
                    <input type="number" id="coinsAmount" placeholder="ุนุฏุฏ ุงูููุงุท" min="1" max="10000" required>
                </div>
                <div class="form-group">
                    <label>ุณุจุจ ุงูุฅูุฏุงุก:</label>
                    <textarea id="coinsReason" placeholder="ุณุจุจ ุฅูุฏุงุก ุงูููุงุท (ุงุฎุชูุงุฑู)"></textarea>
                </div>
                <button onclick="giveCoins()" class="btn btn-primary">
                    <i class="fas fa-coins"></i>
                    ุฅูุฏุงุก ุงูููุงุท
                </button>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุฅุฑุณุงู ุฅุดุนุงุฑ (ูุณุฎุฉ 1) -->
    <div id="sendNotificationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>๐ ุฅุฑุณุงู ุฅุดุนุงุฑ</h2>
                <button class="close-btn" onclick="closeSendNotificationModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="notification-form">
                    <div class="form-group">
                        <label>ุงุฎุชุฑ ุงููุณุชุฎุฏู:</label>
                        <select id="notificationRecipient">
                            <option value="">ุงุฎุชุฑ ูุณุชุฎุฏู...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ุฑุณุงูุฉ ุงูุฅุดุนุงุฑ:</label>
                        <textarea id="notificationMessage" placeholder="ุงูุชุจ ุฑุณุงูุฉ ุงูุฅุดุนุงุฑ..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>ููุน ุงูุฅุดุนุงุฑ:</label>
                        <select id="notificationType">
                            <option value="info">ูุนูููุงุช</option>
                            <option value="success">ูุฌุงุญ</option>
                            <option value="warning">ุชุญุฐูุฑ</option>
                            <option value="error">ุฎุทุฃ</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button onclick="sendNotificationToUser()" class="btn btn-primary">
                            <i class="fas fa-paper-plane"></i> ุฅุฑุณุงู
                        </button>
                        <button onclick="closeSendNotificationModal()" class="btn btn-secondary">ุฅูุบุงุก</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุฅุฑุณุงู ุฅุดุนุงุฑ (ูุณุฎุฉ 2 - ููุฑุฑุฉ) -->
    <div id="sendNotificationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>๐ข ุฅุฑุณุงู ุฅุดุนุงุฑ</h2>
                <button class="close-btn" onclick="closeSendNotificationModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="notification-form">
                    <div class="form-group">
                        <label for="notificationRecipient">ุงุฎุชุฑ ุงููุณุชุฎุฏู:</label>
                        <select id="notificationRecipient" class="form-control">
                            <option value="">ุงุฎุชุฑ ูุณุชุฎุฏู...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="notificationType">ููุน ุงูุฅุดุนุงุฑ:</label>
                        <select id="notificationType" class="form-control">
                            <option value="info">ูุนูููุงุช</option>
                            <option value="success">ูุฌุงุญ</option>
                            <option value="warning">ุชุญุฐูุฑ</option>
                            <option value="error">ุฎุทุฃ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="notificationMessage">ุฑุณุงูุฉ ุงูุฅุดุนุงุฑ:</label>
                        <textarea id="notificationMessage" class="form-control" placeholder="ุงูุชุจ ุฑุณุงูุฉ ุงูุฅุดุนุงุฑ ููุง..." rows="4"></textarea>
                    </div>
                    <div class="modal-actions">
                        <button onclick="sendNotificationToUser()" class="btn btn-primary">
                            <i class="fas fa-paper-plane"></i>
                            ุฅุฑุณุงู ุงูุฅุดุนุงุฑ
                        </button>
                        <button onclick="closeSendNotificationModal()" class="btn btn-secondary">
                            ุฅูุบุงุก
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุงููุชุตููู ุญุงููุงู -->
    <div id="onlineUsersModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>๐ฅ ุงููุชุตููู ุญุงููุงู</h2>
                <button class="close-btn" onclick="closeOnlineUsersModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div id="onlineUsersList" class="online-users-list">
                    <p style="text-align: center; color: var(--text-secondary);">ุฌุงุฑู ุชุญููู ูุงุฆูุฉ ุงููุชุตููู...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ุตูุฏูู ุงูุฏุฑุฏุดุฉ ุงูุฎุงุตุฉ -->
    <div id="privateChatBox" class="private-chat-box" style="display: none;">
        <div class="chat-box-header">
            <h3 class="chat-box-title">๐ฌ ุฏุฑุฏุดุฉ ุฎุงุตุฉ</h3>
            <div class="chat-box-controls">
                <button class="chat-box-btn" onclick="minimizePrivateChatBox()" title="ุชุตุบูุฑ">
                    <i class="fas fa-minus"></i>
                </button>
                <button class="chat-box-btn" onclick="closePrivateChatBox()" title="ุฅุบูุงู">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        <div class="chat-box-body">
            <div class="private-chat-users">
                <select id="privateChatUserSelect" onchange="selectPrivateChatUser()">
                    <option value="">ุงุฎุชุฑ ูุณุชุฎุฏู ููุฏุฑุฏุดุฉ...</option>
                </select>
            </div>
            <div id="privateChatMessages" class="private-chat-messages">
                <p style="text-align: center; color: var(--text-secondary); padding: 20px;">
                    ุงุฎุชุฑ ูุณุชุฎุฏู ูุจุฏุก ุงููุญุงุฏุซุฉ
                </p>
            </div>
            <div class="private-chat-input">
                <input type="text" id="privateChatInput" placeholder="ุงูุชุจ ุฑุณุงูุฉ..." onkeypress="if(event.key==='Enter') sendPrivateChatMessage()">
                <button class="private-chat-send" onclick="sendPrivateChatMessage()">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="loading-spinner" style="display: none;">
        <div class="spinner"></div>
        <p>ุฌุงุฑู ุงูุชุญููู...</p>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Audio Elements -->
    <audio id="notificationSound" preload="auto">
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp6......" type="audio/wav">
    </audio>

    <!-- ========== ูุธุงู ููุงูุญุฉ ุงูููุถุงูุงุช + ุชุญุณูู ุงูุดุงุช ========= -->
    <script>
        // ูุธุงู ููุงูุญุฉ ุงูููุถุงูุงุช
        const floodThreshold = 5; // ุนุฏุฏ ุงูุฑุณุงุฆู ุงููุณููุญ ุจูุง ูู ูุชุฑุฉ ุฒูููุฉ
        const floodTimeWindow = 10000; // 10 ุซูุงูู

        let userMessageHistory = {}; // { userId: [timestamps] }

        function checkFlood(userId, messageText) {
            if (!userMessageHistory[userId]) {
                userMessageHistory[userId] = [];
            }

            const now = Date.now();
            const history = userMessageHistory[userId];

            // ุญุฐู ุงูุฑุณุงุฆู ุงููุฏููุฉ (> 10 ุซูุงูู)
            while (history.length > 0 && history[0] < now - floodTimeWindow) {
                history.shift();
            }

            // ุฅุถุงูุฉ ุงูุฑุณุงูุฉ ุงูุญุงููุฉ
            history.push(now);

            // ุฅุฐุง ุชุฌุงูุฒ ุงูุนุฏุฏ ุงููุณููุญ ุจู
            if (history.length > floodThreshold) {
                // ูุชู ุงููุณุชุฎุฏู ููุฏุฉ 5 ุฏูุงุฆู
                muteUserForDuration(userId, 300000); // 5 ุฏูุงุฆู ุจุงููููู ุซุงููุฉ

                // ุฅุฑุณุงู ุฑุณุงูุฉ ุชุญุฐูุฑ ูู ุงูุดุงุช
                const msg = document.createElement('div');
                msg.className = 'message flood-warning';
                msg.innerHTML = `<strong>โ๏ธ ุชู ูุชูู ูุคูุชูุง ููููุถุงู! ูุง ุชุฑุณู ุฃูุซุฑ ูู ${floodThreshold} ุฑุณุงุฆู ูู 10 ุซูุงูู.</strong>`;
                document.getElementById('messagesContainer').appendChild(msg);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;

                // ุชูุธูู ุณุฌู ุงูุฑุณุงุฆู ุจุนุฏ ุงููุชู (ุงุฎุชูุงุฑู)
                setTimeout(() => {
                    delete userMessageHistory[userId];
                }, 60000); // ุชูุธูู ุงูุณุฌู ุจุนุฏ ุฏูููุฉ ูุงุญุฏุฉ

                return true; // ุฃููู ุงูุฅุฑุณุงู
            }
            return false;
        }

        // ุฏุงูุฉ ูุฅููุงู ุงููุณุชุฎุฏู ูุคูุชูุง
        function muteUserForDuration(userId, durationMs) {
            if (typeof muteUser === 'function') {
                muteUser(userId);
            }

            // ุชุบููุฑ ูุธูุฑ ุงููุณุชุฎุฏู ูู ูุงุฆูุฉ ุงููุชุตููู ุฅู ููุฌุฏ
            const userItem = document.querySelector(`.user-item[data-id="${userId}"]`);
            if (userItem) {
                userItem.style.opacity = '0.5';
                userItem.title = 'ูุณุชุฎุฏู ูุญุธูุฑ ูุคูุชูุง';
            }

            // ุฅุนุงุฏุฉ ุงูุชูุนูู ุจุนุฏ ุงูููุช ุงููุญุฏุฏ
            setTimeout(() => {
                if (typeof unmuteUser === 'function') {
                    unmuteUser(userId);
                }
                if (userItem) {
                    userItem.style.opacity = '1';
                    userItem.title = '';
                }
            }, durationMs);
        }

        // ุชุนุฏูู ุฏุงูุฉ sendMessage ูุชุถููู ูุญุต ุงูููุถุงู
        const originalSendMessage = window.sendMessage;
        window.sendMessage = function() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();

            if (!message) return;

            // โ ูุญุต ุงูููุถุงู ูุจู ุงูุฅุฑุณุงู
            if (checkFlood(currentUserId, message)) {
                input.value = ''; // ูุณุญ ุงููุฏุฎู
                return; // ูุง ุชุฑุณู ุงูุฑุณุงูุฉ
            }

            // ุงุณุชุฏุนุงุก ุงูุฏุงูุฉ ุงูุฃุตููุฉ
            if (originalSendMessage) {
                originalSendMessage();
            }
        };
    </script>

    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html>
